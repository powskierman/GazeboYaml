# Remove this line from configuration.yaml:
# rest: !include complete_gazebo_sensors.yaml

# And add this directly in configuration.yaml instead:

rest:
  - resource: "https://api.open-meteo.com/v1/forecast?latitude=45.2631&longitude=-71.9788&hourly=apparent_temperature,precipitation_probability,temperature,precipitation,relative_humidity_2m&current=temperature_2m,relative_humidity_2m,apparent_temperature&temperature_unit=celsius&precipitation_unit=mm&timezone=auto&forecast_days=1"
    scan_interval: 600
    sensor:
      - name: "Gazebo Current Temperature"
        unique_id: gazebo_current_temperature
        value_template: "{{ value_json['current']['temperature_2m'] }}"
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement

      - name: "Gazebo Current Apparent Temperature"
        unique_id: gazebo_current_apparent_temperature
        value_template: "{{ value_json['current']['apparent_temperature'] }}"
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement

      - name: "Gazebo Current Humidity"
        unique_id: gazebo_current_humidity
        value_template: "{{ value_json['current']['relative_humidity_2m'] }}"
        unit_of_measurement: "%"
        device_class: humidity
        state_class: measurement

      - name: "Gazebo Hour 0 Feels Like"
        unique_id: gazebo_hour_0_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][now().hour] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 1 Feels Like"
        unique_id: gazebo_hour_1_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 1) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 2 Feels Like"
        unique_id: gazebo_hour_2_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 2) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 3 Feels Like"
        unique_id: gazebo_hour_3_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 3) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 4 Feels Like"
        unique_id: gazebo_hour_4_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 4) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 5 Feels Like"
        unique_id: gazebo_hour_5_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 5) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 6 Feels Like"
        unique_id: gazebo_hour_6_feels_like
        value_template: "{{ value_json['hourly']['apparent_temperature'][(now().hour + 6) % 24] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 0 Precipitation"
        unique_id: gazebo_hour_0_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][now().hour] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 1 Precipitation"
        unique_id: gazebo_hour_1_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 1) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 2 Precipitation"
        unique_id: gazebo_hour_2_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 2) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 3 Precipitation"
        unique_id: gazebo_hour_3_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 3) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 4 Precipitation"
        unique_id: gazebo_hour_4_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 4) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 5 Precipitation"
        unique_id: gazebo_hour_5_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 5) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 6 Precipitation"
        unique_id: gazebo_hour_6_precipitation
        value_template: "{{ value_json['hourly']['precipitation_probability'][(now().hour + 6) % 24] }}"
        unit_of_measurement: "%"

      - name: "Gazebo Hour 0 Temperature"
        unique_id: gazebo_hour_0_temperature
        value_template: "{{ value_json['hourly']['temperature'][0] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 1 Temperature"
        unique_id: gazebo_hour_1_temperature
        value_template: "{{ value_json['hourly']['temperature'][1] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 2 Temperature"
        unique_id: gazebo_hour_2_temperature
        value_template: "{{ value_json['hourly']['temperature'][2] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 3 Temperature"
        unique_id: gazebo_hour_3_temperature
        value_template: "{{ value_json['hourly']['temperature'][3] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 4 Temperature"
        unique_id: gazebo_hour_4_temperature
        value_template: "{{ value_json['hourly']['temperature'][4] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 5 Temperature"
        unique_id: gazebo_hour_5_temperature
        value_template: "{{ value_json['hourly']['temperature'][5] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 6 Temperature"
        unique_id: gazebo_hour_6_temperature
        value_template: "{{ value_json['hourly']['temperature'][6] }}"
        unit_of_measurement: "°C"
        device_class: temperature

      - name: "Gazebo Hour 0 Humidity"
        unique_id: gazebo_hour_0_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][0] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 1 Humidity"
        unique_id: gazebo_hour_1_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][1] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 2 Humidity"
        unique_id: gazebo_hour_2_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][2] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 3 Humidity"
        unique_id: gazebo_hour_3_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][3] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 4 Humidity"
        unique_id: gazebo_hour_4_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][4] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 5 Humidity"
        unique_id: gazebo_hour_5_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][5] }}"
        unit_of_measurement: "%"
        device_class: humidity

      - name: "Gazebo Hour 6 Humidity"
        unique_id: gazebo_hour_6_humidity
        value_template: "{{ value_json['hourly']['relative_humidity_2m'][6] }}"
        unit_of_measurement: "%"
        device_class: humidity